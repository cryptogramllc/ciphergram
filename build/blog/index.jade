doctype html
include ../includes/head.jade
- var pageTitle = "Blog | Ciphergram - Latest Insights on Cybersecurity & Technology"
- var pageDescription = "Stay updated with the latest insights on cybersecurity, software development, AI, and IT consulting from Ciphergram's expert team. Read our blog for industry trends, best practices, and technology solutions."
- var canonicalUrl = "/blog"
- var blogJsonLd = '{"@context":"https://schema.org","@type":"Blog","name":"Ciphergram Blog","description":"Latest insights on cybersecurity, software development, AI, and IT consulting","url":"https://ciphergram.io/blog","publisher":{"@type":"Organization","name":"Ciphergram","logo":{"@type":"ImageObject","url":"https://ciphergram.io/images/logo.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ciphergram.io/blog"}}'
- var currentPage = 'blog'
body
    // LOADER
    #loader-overflow
        #loader3 Please enable JS
    #wrap.boxed
        .grey-bg
            // Grey BG
            //if lte IE 8
                #ie-container
                    #ie-cont-close
                        a(href='#', onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;')
                            img(src='images/ie-warn/ie-warning-close.jpg', style='border: none;', alt='Close')
                    #ie-cont-content
                        #ie-cont-warning
                            img(src='images/ie-warn/ie-warning.jpg', alt='Warning!')
                        #ie-cont-text
                            #ie-text-bold
                            #ie-text
                        #ie-cont-brows
                            a(href='http://www.firefox.com', target='_blank')
                                img(src='images/ie-warn/ie-warning-firefox.jpg', alt='Download Firefox')
                            a(href='http://www.opera.com/download/', target='_blank')
                                img(src='images/ie-warn/ie-warning-opera.jpg', alt='Download Opera')
                            a(href='http://www.apple.com/safari/download/', target='_blank')
                                img(src='images/ie-warn/ie-warning-safari.jpg', alt='Download Safari')
                            a(href='http://www.google.com/chrome', target='_blank')
                                img(src='images/ie-warn/ie-warning-chrome.jpg', alt='Download Google Chrome')
            // HEADER 1 BLACK MOBILE-NO-TRANSPARENT
            include ../includes/header.jade
    #blog.page-section.p-140-cont
      .container
        .row
          .col-md-12
            .row
              .col-md-12.col-sm-12
                .fes4-box.wow.fadeIn(data-wow-delay='200ms')
                  h2.section-title
                    span.bold.title
                    span.bold.right.small.date
            .row
              .col-md-12.col-sm-12.pb-10
                .fes5-box.wow.fadeIn(data-wow-delay='200ms')
                  .main-content
    include ../includes/footer.jade
include ../includes/scripts/js.jade
// Blog-specific structured data
if typeof blogJsonLd !== 'undefined'
  script(type="application/ld+json").
    !{blogJsonLd}
script.
    $(document).ready(function() {
        function snippet(text, wordLimit) {
            const words = text.split(' ');
            if (wordLimit >= words.length) { return text; }
            const truncatedText = words.slice(0, wordLimit).join(' ');
            return truncatedText;
        }

        function getUUIDFromURL() {
            const fullURL = window.location.href;
            const urlParts = fullURL.split('?');
            if (urlParts.length > 1) {
                return urlParts[1];
            }
            return '';
        }
        
        function fetchContent(uuid) { 
            return new Promise((resolve, reject) => {
                const id = uuid || '';
                const url = `https://h38fikktw7.execute-api.us-east-1.amazonaws.com/prod/items/${id}`;
                
                $.ajax({
                    url: url, 
                    method: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        resolve(data);
                    },
                    error: function(xhr, status, error) {
                        console.error('API request failed:', error);
                        reject(error);
                    }
                });
            });
        }

        async function loadBlogContent() {
            try {
                const uuid = getUUIDFromURL();
                const response = await fetchContent(uuid);
                
                if (response && Array.isArray(response)) { 
                    $('h2.section-title span.title').html('Blog');
                    $('h2.section-title span.date').html('');
                    $('.main-content').html('<ul class="blog-list"></ul>');
                    let blogContent = '';

                    $.each(response, function(index, item) {
                        const { uuid, title, image, content, date, link } = item;
                        const snip = snippet(content, 50);
                        blogContent += `<li class="blog-item">
                                            <a href="/article.html?uuid=${encodeURIComponent(uuid)}">
                                                <div class="blog-item-image" style="background-image: url(${image})"></div>
                                                <div class="blog-item-content">
                                                    <span class="title"><h1>${title}</h1></span>
                                                    <span class="date right">${date}</span>
                                                    <div class="snippet">${snip}...</div>
                                                </div>
                                            </a>
                                        </li>`;
                    });
                    $('.blog-list').html(blogContent);
                } else {
                    // Show fallback content if API fails
                    $('h2.section-title span.title').html('Blog');
                    $('h2.section-title span.date').html('');
                    $('.main-content').html(`
                        <div class="blog-fallback">
                            <h3>Welcome to Our Blog</h3>
                            <p>We're currently updating our blog content. Please check back soon for the latest insights on cybersecurity, software development, and IT consulting.</p>
                            <p>In the meantime, feel free to <a href="/index.html#contact-link">contact us</a> with any questions.</p>
                        </div>
                    `);
                }
            } catch (error) {
                console.error('Error loading blog content:', error);
                // Show fallback content
                $('h2.section-title span.title').html('Blog');
                $('h2.section-title span.date').html('');
                $('.main-content').html(`
                    <div class="blog-fallback">
                        <h3>Welcome to Our Blog</h3>
                        <p>We're currently updating our blog content. Please check back soon for the latest insights on cybersecurity, software development, and IT consulting.</p>
                        <p>In the meantime, feel free to <a href="/index.html#contact-link">contact us</a> with any questions.</p>
                    </div>
                `);
            }
        }

        // Load blog content
        loadBlogContent();
    });